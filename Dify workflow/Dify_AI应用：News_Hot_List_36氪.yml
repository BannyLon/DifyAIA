app:
  description: ''
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: 'Dify AI æ•™ç¨‹ï¼šNews Hot List '
  use_icon_as_answer_icon: false
kind: app
version: 0.1.3
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        sourceType: start
        targetType: http-request
      id: 1731657142529-source-1731657173907-target
      source: '1731657142529'
      sourceHandle: source
      target: '1731657173907'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: http-request
        targetType: llm
      id: 1731657173907-source-1731657269402-target
      source: '1731657173907'
      sourceHandle: source
      target: '1731657269402'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: code
      id: 1731657269402-source-1731657495644-target
      source: '1731657269402'
      sourceHandle: source
      target: '1731657495644'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: iteration
      id: 1731657495644-source-1731657624078-target
      source: '1731657495644'
      sourceHandle: source
      target: '1731657624078'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        iteration_id: '1731657624078'
        sourceType: http-request
        targetType: llm
      id: 1731657694132-source-1731657813535-target
      source: '1731657694132'
      sourceHandle: source
      target: '1731657813535'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        sourceType: iteration
        targetType: template-transform
      id: 1731657624078-source-1731657915903-target
      source: '1731657624078'
      sourceHandle: source
      target: '1731657915903'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        iteration_id: '1731657624078'
        sourceType: template-transform
        targetType: http-request
      id: 1731662449984-source-1731657694132-target
      source: '1731662449984'
      sourceHandle: source
      target: '1731657694132'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1731657624078'
        sourceType: iteration-start
        targetType: template-transform
      id: 1731657624078start-source-1731662449984-target
      source: 1731657624078start
      sourceHandle: source
      target: '1731662449984'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        sourceType: template-transform
        targetType: code
      id: 1731657915903-source-1732083026646-target
      source: '1731657915903'
      sourceHandle: source
      target: '1732083026646'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: http-request
      id: 1732083026646-source-1732083061013-target
      source: '1732083026646'
      sourceHandle: source
      target: '1732083061013'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: http-request
        targetType: end
      id: 1732083061013-source-1731658032951-target
      source: '1732083061013'
      sourceHandle: source
      target: '1731658032951'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables: []
      height: 64
      id: '1731657142529'
      position:
        x: 374.9091923574524
        y: 42.18373368734646
      positionAbsolute:
        x: 374.9091923574524
        y: 42.18373368734646
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data: []
          type: none
        desc: ''
        headers: ''
        method: get
        params: ''
        selected: false
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: è·å–36æ°ª24å°æ—¶çƒ­æ¦œ
        type: http-request
        url: https://api.vvhan.com/api/hotlist/36Ke
        variables: []
      height: 134
      id: '1731657173907'
      position:
        x: 643.668564924877
        y: 42.18373368734646
      positionAbsolute:
        x: 643.668564924877
        y: 42.18373368734646
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: qwen2.5:latest
          provider: ollama
        prompt_template:
        - id: 87334ee0-f176-4030-94da-324daaefd4b4
          role: system
          text: '```xml

            <instruction>

            <instructions>

            Â 1. æŠ“å–äº†360æ°ªæ–°é—»æ¦œå• json ï¼š{{#1731657173907.body#}}

            Â 2. åªç”Ÿæˆæ¦œå•å‰é¢ 3 æ¡æ•°æ®

            Â 3. ç”Ÿæˆå¦‚ä¸‹ç»“æ„çš„å†…å®¹ï¼š

            Â  Â [{

            Â  Â  Â "title": "æ–°é—»æ ‡é¢˜",

            Â  Â  Â "url": "æ–°é—»é“¾æ¥"

            Â  Â }]

            Â 4.è¾“å‡ºä¸è¦æ·»åŠ ```json åŒ…è£¹

            </instructions>

            Â 

            <examples>

            Â <example>

            Â  Â <output>

            Â  Â  Â [

            Â  Â  Â  Â {"title": "8ç‚¹1æ°ªï½œä¸ªäººè´­æˆ¿ä¸è¶…140å¹³å¥‘ç¨é™è‡³1%ï¼›ç‰¹æ–¯æ‹‰10ä¸‡å‘˜å·¥è–ªé…¬æ•°æ®æ›å…‰ï¼›æ ¡å›­æ‹›è˜ä¸¥ç¦é™å®š985å’Œ211é«˜æ ¡","url":"https://36kr.com/p/3035465134387461"},

            Â  Â  Â  Â  Â {"title": "é¿å…å†…è€—ï¼Œå‰åˆ©å°†æ•´åˆææ°ªå’Œé¢†å…‹ä¸¤å¤§å“ç‰Œï½œ36æ°ªç‹¬å®¶","url":"https://36kr.com/p/3034230633984003"},

            {"title": "Transformeræ‰“ç ´ä¸‰åå¹´æ•°å­¦çŒœæƒ³ï¼ŒMetaç ”ç©¶è€…ç”¨AIç»™å‡ºåä¾‹ï¼Œç®—æ³•æ€æ‰‹æ”»å…‹æ•°å­¦éš¾é¢˜ï½œ36æ°ªç‹¬å®¶","url":"https://36kr.com/p/3034698843615238"},

            Â  Â  Â ]

            Â  Â </output>

            Â </example>

            <examples>'
        selected: false
        title: LLMæ¢³ç†æ–°é—»æ•°ç»„
        type: llm
        variables: []
        vision:
          enabled: false
      height: 119
      id: '1731657269402'
      position:
        x: 618.3168305973979
        y: 282
      positionAbsolute:
        x: 618.3168305973979
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        code: "import json\nimport re\n\ndef clean_url(url):\n    # ç§»é™¤æ‰€æœ‰éæ‰“å°çš„ASCIIå­—ç¬¦ï¼ˆåŒ…æ‹¬æ§åˆ¶å­—ç¬¦ï¼‰\n\
          \    cleaned_url = re.sub(r'[\\x00-\\x1F\\x7F-\\x9F]', '', url)\n    # ç§»é™¤å¤šä½™çš„ç©ºæ ¼ï¼ˆåŒ…æ‹¬åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ï¼‰\n\
          \    cleaned_url = re.sub(r'\\s+', ' ', cleaned_url).strip()\n    return\
          \ cleaned_url\n\ndef main(arg1: str) -> dict:\n    try:\n        json_object\
          \ = json.loads(arg1)\n        \n        # éå†åˆ—è¡¨ä¸­çš„æ¯ä¸ªå¯¹è±¡ä»¥è·å– URLï¼Œå¹¶æ¸…ç†URL\n   \
          \     if isinstance(json_object, list):\n            for item in json_object:\n\
          \                raw_url = item.get('url')\n                if raw_url is\
          \ not None:\n                    # æ¸…ç†URL\n                    cleaned_url\
          \ = clean_url(raw_url)\n                    # æ›´æ–°itemä¸­çš„URL\n            \
          \        item['url'] = cleaned_url\n        \n        return {\n       \
          \     \"result\": json_object\n        }\n    except json.JSONDecodeError\
          \ as e:\n        return {\n            \"result\": None,\n            \"\
          error\": f\"Invalid JSON: {str(e)}\"\n        }\n\n# ç¤ºä¾‹è¾“å…¥\nrag1 = '[{\"\
          name\": \"Item 1\", \"url\": \"http://item1.example.com\\n\"}, {\"name\"\
          : \"Item 2\", \"url\": \"http://item2.example.com\"}]'\nprint(main(rag1))"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: array[object]
        selected: false
        title: è½¬æ¢æ•°æ®ä½jsonæ ¼å¼
        type: code
        variables:
        - value_selector:
          - '1731657269402'
          - text
          variable: arg1
      height: 64
      id: '1731657495644'
      position:
        x: 899.074037541089
        y: 282
      positionAbsolute:
        x: 899.074037541089
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        desc: ''
        error_handle_mode: terminated
        height: 225
        is_parallel: false
        iterator_selector:
        - '1731657495644'
        - result
        output_selector:
        - '1731657813535'
        - text
        output_type: array[string]
        parallel_nums: 10
        selected: false
        start_node_id: 1731657624078start
        title: è¿­ä»£è·å–æ–°é—»æ­£æ–‡
        type: iteration
        width: 934
      height: 225
      id: '1731657624078'
      position:
        x: 1187.0956292950807
        y: 282
      positionAbsolute:
        x: 1187.0956292950807
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 934
      zIndex: 1
    - data:
        desc: ''
        isInIteration: true
        selected: false
        title: ''
        type: iteration-start
      draggable: false
      height: 60
      id: 1731657624078start
      parentId: '1731657624078'
      position:
        x: 24
        y: 68
      positionAbsolute:
        x: 1211.0956292950807
        y: 350
      selectable: false
      sourcePosition: right
      targetPosition: left
      type: custom-iteration-start
      width: 55
      zIndex: 1002
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data: []
          type: none
        desc: ''
        headers: ''
        isInIteration: true
        iteration_id: '1731657624078'
        method: get
        params: ''
        selected: false
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: HTTP è¯·æ±‚ 2
        type: http-request
        url: https://r.jina.ai/{{#1731662449984.output#}}
        variables: []
      height: 135
      id: '1731657694132'
      parentId: '1731657624078'
      position:
        x: 400.79820143179086
        y: 68
      positionAbsolute:
        x: 1587.8938307268716
        y: 350
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
      zIndex: 1002
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        isInIteration: true
        iteration_id: '1731657624078'
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: qwen2.5:latest
          provider: ollama
        prompt_template:
        - id: 349acaa6-92d5-4fb1-9e26-259049474677
          role: system
          text: '```xml

            <instruction>

            <instructions>

            Â 1. jina æŠ“å–äº†36æ°ªæ–°é—»ç½‘é¡µå†…å®¹ï¼š{{#1731657694132.body#}}

            Â 2. ç”Ÿæˆå¦‚ä¸‹ç»“æ„çš„å†…å®¹ï¼š

            Â  Â æ–°é—»æ ‡é¢˜

            Â  Â ============================

            Â  Â æ–°é—»æ—¥æœŸ

            Â  Â æ–°é—»å†…å®¹

            </instructions>

            Â 

            <examples>

            Â <example>

            Â  Â <output>

            Â  Â  Â  Â  é¿å…å†…è€—ï¼Œå‰åˆ©å°†æ•´åˆææ°ªå’Œé¢†å…‹ä¸¤å¤§å“ç‰Œï½œ36æ°ªç‹¬å®¶

            Â  Â  Â  Â  ============================

            Â  Â  Â  Â  2024-11-14 03:21

            Â  Â  Â  Â  å…·ä½“æ–¹æ¡ˆé¢„è®¡å¹´åº•è½åœ°


            â€œè¿›ä¸€æ­¥æ˜æ™°å„å“ç‰Œå®šä½ï¼Œç†é¡ºè‚¡æƒå…³ç³»ï¼Œå‡å°‘åˆ©ç›Šå†²çªå’Œé‡å¤æŠ•èµ„â€ï¼Œåœ¨å‰åˆ©é›†å›¢å‘å¸ƒçš„ã€Šå°å·å®£è¨€ã€‹ä¸­ï¼Œåˆå¹¶ä¸é‡ç»„æˆä¸ºé›†å›¢è°ƒæ•´çš„ä¸»æ—‹å¾‹ã€‚


            **36æ°ªç‹¬å®¶è·æ‚‰ï¼Œå‰åˆ©é›†å›¢æ——ä¸‹é¢†å…‹æ±½è½¦å°†å¹¶å…¥ææ°ªæ±½è½¦ï¼Œç”±ææ°ªCEOå®‰èªæ…§ç»Ÿç­¹ç®¡ç†ã€‚åˆå¹¶åï¼Œé¢†å…‹å“ç‰Œå°†è¢«ä¿ç•™ï¼Œä½†å›¢é˜Ÿä¸æˆ˜ç•¥å°†ä¸ææ°ªå®ç°èåˆã€‚**


            å…¶ä¸­ï¼Œè´¢åŠ¡ä¸é‡‡è´­å›¢é˜Ÿå°†ç‡å…ˆå®Œæˆåˆå¹¶ï¼Œäº§å“ã€ç ”å‘ç­‰éƒ¨é—¨çš„è°ƒæ•´ä¹Ÿå°†åœ¨ä»Šå¹´å¹´åº•è‡³æ˜å¹´å¹´åˆæ¨è¿›ã€‚


            é¢†å…‹å’Œææ°ªï¼Œå¯ä»¥è¯´æ˜¯è¿‘å¹´æ¥å‰åˆ©å­µåŒ–ä¹˜ç”¨è½¦å“ç‰ŒåŒå­æ˜Ÿã€‚ä»Šå¹´å‰ä¸‰å­£åº¦ï¼Œé¢†å…‹å–å‡º16.98ä¸‡è¾†ï¼Œææ°ªé”€é‡é€¼è¿‘15ä¸‡ï¼Œä¸¤ä¸ªå“ç‰Œé”€é‡å å‰åˆ©é›†å›¢æ€»é”€é‡è¿‘30%ã€‚ä¸ä»…æ˜¯é”€é‡æ”¯æŸ±ï¼Œæ›´æ˜¯å‰åˆ©æ–°èƒ½æºè½¬å‹çš„é‡è¦è§’è‰²ã€‚


            **çŸ¥æƒ…äººå£«é€éœ²ï¼Œé¢†å…‹ä¸ææ°ªäº§å“çš„é‡å ï¼Œæ˜¯ä¿ƒä½¿é«˜å±‚ä¸‹å®šå†³å¿ƒæ•´åˆçš„åŸå› ã€‚**

            Â  Â </output>

            Â </example>

            <examples>'
        selected: false
        title: LLM 2
        type: llm
        variables: []
        vision:
          enabled: false
      height: 119
      id: '1731657813535'
      parentId: '1731657624078'
      position:
        x: 667.9662803399297
        y: 68
      positionAbsolute:
        x: 1855.0619096350104
        y: 350
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
      zIndex: 1002
    - data:
        desc: ''
        selected: false
        template: '{{ arg1 | join("\n==============\n") }}'
        title: æ¨¡æ¿è½¬æ¢ 2
        type: template-transform
        variables:
        - value_selector:
          - '1731657624078'
          - output
          variable: arg1
      height: 64
      id: '1731657915903'
      position:
        x: 2150.229228420047
        y: 282
      positionAbsolute:
        x: 2150.229228420047
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1732083061013'
          - files
          variable: output
        selected: false
        title: ç»“æŸ
        type: end
      height: 109
      id: '1731658032951'
      position:
        x: 2187.6002379283627
        y: 581.7703328908169
      positionAbsolute:
        x: 2187.6002379283627
        y: 581.7703328908169
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        desc: ''
        isInIteration: true
        iteration_id: '1731657624078'
        selected: false
        template: '{{ arg1.url }}'
        title: æ¨¡æ¿è½¬æ¢ 2
        type: template-transform
        variables:
        - value_selector:
          - '1731657624078'
          - item
          variable: arg1
      height: 64
      id: '1731662449984'
      parentId: '1731657624078'
      position:
        x: 135.5358002659118
        y: 68.74569884408527
      positionAbsolute:
        x: 1322.6314295609925
        y: 350.74569884408527
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
      zIndex: 1002
    - data:
        code: "import re\n\ndef clean_text(text):\n    # å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­å­—ç¬¦æ˜¯å¦æœ‰æ•ˆ\n    def\
          \ is_valid_char(c):\n        # å…è®¸å¯æ‰“å°å­—ç¬¦å’Œæ¢è¡Œç¬¦\n        return c.isprintable()\
          \ or c == '\\n'\n    \n    # ä½¿ç”¨ filter å‡½æ•°ç§»é™¤æ— æ•ˆå­—ç¬¦\n    text = ''.join(filter(is_valid_char,\
          \ text))\n    \n    # ç§»é™¤å¤šä½™çš„ç©ºç™½å­—ç¬¦\n    text = re.sub(r'\\s+', ' ', text).strip()\n\
          \    \n    return text\n\ndef main(arg1: str) -> dict:\n    return {\n \
          \       \"result\": clean_text(arg1)\n    }\n\n# ç¤ºä¾‹ç”¨æ³•\nif __name__ == \"\
          __main__\":\n    sample_text = \"This is a test text with invalid control\
          \ characters: \\x01\\x02\\x03 and some spaces   .\"\n    print(main(sample_text))"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: ä»£ç æ‰§è¡Œ 2
        type: code
        variables:
        - value_selector:
          - '1731657915903'
          - output
          variable: arg1
      height: 64
      id: '1732083026646'
      position:
        x: 2423.537137054739
        y: 282
      positionAbsolute:
        x: 2423.537137054739
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: key-value-17
            key: ''
            type: text
            value: "{\n  \"title\": \"24å°æ—¶æ–°é—»èµ„è®¯é€Ÿè§ˆ\",\n  \"content\": \"{{#1732083026646.result#}}\"\
              \n}"
          type: json
        desc: ''
        headers: Content-Type:application/json
        method: post
        params: ''
        selected: false
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: HTTP è¯·æ±‚ 3
        type: http-request
        url: http://192.168.0.141:5001/generate_doc
        variables: []
      height: 134
      id: '1732083061013'
      position:
        x: 2199.056535470447
        y: 410.0100340452678
      positionAbsolute:
        x: 2199.056535470447
        y: 410.0100340452678
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    viewport:
      x: -209.4900018423764
      y: 142.84175362013906
      zoom: 0.6171391218602714
